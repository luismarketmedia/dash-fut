exports.id=31,exports.ids=[31],exports.modules={98652:(e,t,a)=>{let r={c47c38d765432507b0c274e1c1080b163084dd3c:()=>Promise.resolve().then(a.bind(a,32752)).then(e=>e.invalidateCacheAction)};async function o(e,...t){return(await r[e]()).apply(null,t)}e.exports={c47c38d765432507b0c274e1c1080b163084dd3c:o.bind(null,"c47c38d765432507b0c274e1c1080b163084dd3c")}},27263:(e,t,a)=>{let r={"867ff7bd7265f494fdcc611ae8e660b2b95ac4d3":()=>Promise.resolve().then(a.bind(a,56600)).then(e=>e.collectKeylessMetadata),fc96964ed4aa790b047205564a22b19067506bd8:()=>Promise.resolve().then(a.bind(a,56600)).then(e=>e.formatMetadataHeaders),"55c7b181c02937a1d434207767e87dddcf3a5f15":()=>Promise.resolve().then(a.bind(a,10434)).then(e=>e.syncKeylessConfigAction),"59fbd3e58bf6bf78ba083060e57a70aa60464a45":()=>Promise.resolve().then(a.bind(a,10434)).then(e=>e.detectKeylessEnvDriftAction),"7f275190178cdd959a919690942b636d49ec8ecc":()=>Promise.resolve().then(a.bind(a,10434)).then(e=>e.createOrReadKeylessAction),b9f9d36bf3d8d1e053954d1410ccbd768526c560:()=>Promise.resolve().then(a.bind(a,10434)).then(e=>e.deleteKeylessAction)};async function o(e,...t){return(await r[e]()).apply(null,t)}e.exports={"867ff7bd7265f494fdcc611ae8e660b2b95ac4d3":o.bind(null,"867ff7bd7265f494fdcc611ae8e660b2b95ac4d3"),fc96964ed4aa790b047205564a22b19067506bd8:o.bind(null,"fc96964ed4aa790b047205564a22b19067506bd8"),"55c7b181c02937a1d434207767e87dddcf3a5f15":o.bind(null,"55c7b181c02937a1d434207767e87dddcf3a5f15"),"59fbd3e58bf6bf78ba083060e57a70aa60464a45":o.bind(null,"59fbd3e58bf6bf78ba083060e57a70aa60464a45"),"7f275190178cdd959a919690942b636d49ec8ecc":o.bind(null,"7f275190178cdd959a919690942b636d49ec8ecc"),b9f9d36bf3d8d1e053954d1410ccbd768526c560:o.bind(null,"b9f9d36bf3d8d1e053954d1410ccbd768526c560")}},44005:(e,t,a)=>{Promise.resolve().then(a.bind(a,24918)),Promise.resolve().then(a.bind(a,64816)),Promise.resolve().then(a.bind(a,14511)),Promise.resolve().then(a.bind(a,34119)),Promise.resolve().then(a.bind(a,66541)),Promise.resolve().then(a.bind(a,64498)),Promise.resolve().then(a.bind(a,50032))},92768:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,26064,23)),Promise.resolve().then(a.t.bind(a,65324,23)),Promise.resolve().then(a.t.bind(a,48330,23)),Promise.resolve().then(a.t.bind(a,81393,23)),Promise.resolve().then(a.t.bind(a,5635,23)),Promise.resolve().then(a.t.bind(a,5961,23))},21200:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,94610,23))},24918:(e,t,a)=>{"use strict";a.d(t,{Providers:()=>N});var r=a(5909),o=a(38994),d=a(97450),i=a(38083),s=a(63828);let l=({...e})=>{let{theme:t="system"}=(0,i.F)();return r.jsx(s.x7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var n=a(37889),c=a(1672),p=a(90356),m=a(6665),f=a(86021);let u=n.zt,y=m.forwardRef(({className:e,...t},a)=>r.jsx(n.l_,{ref:a,className:(0,f.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));y.displayName=n.l_.displayName;let h=(0,c.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),g=m.forwardRef(({className:e,variant:t,...a},o)=>r.jsx(n.fC,{ref:o,className:(0,f.cn)(h({variant:t}),e),...a}));g.displayName=n.fC.displayName,m.forwardRef(({className:e,...t},a)=>r.jsx(n.aU,{ref:a,className:(0,f.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=n.aU.displayName;let _=m.forwardRef(({className:e,...t},a)=>r.jsx(n.x8,{ref:a,className:(0,f.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(p.Z,{className:"h-4 w-4"})}));_.displayName=n.x8.displayName;let E=m.forwardRef(({className:e,...t},a)=>r.jsx(n.Dx,{ref:a,className:(0,f.cn)("text-sm font-semibold",e),...t}));E.displayName=n.Dx.displayName;let A=m.forwardRef(({className:e,...t},a)=>r.jsx(n.dk,{ref:a,className:(0,f.cn)("text-sm opacity-90",e),...t}));A.displayName=n.dk.displayName;let b=0,w=new Map,I=e=>{if(w.has(e))return;let t=setTimeout(()=>{w.delete(e),S({type:"REMOVE_TOAST",toastId:e})},1e6);w.set(e,t)},T=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?I(a):e.toasts.forEach(e=>{I(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},v=[],O={toasts:[]};function S(e){O=T(O,e),v.forEach(e=>{e(O)})}function D({...e}){let t=(b=(b+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>S({type:"DISMISS_TOAST",toastId:t});return S({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>S({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let{toasts:e}=function(){let[e,t]=m.useState(O);return m.useEffect(()=>(v.push(t),()=>{let e=v.indexOf(t);e>-1&&v.splice(e,1)}),[]),{...e,toast:D,dismiss:e=>S({type:"DISMISS_TOAST",toastId:e})}}();return(0,r.jsxs)(u,{children:[e.map(({id:e,title:t,description:a,action:o,...d})=>(0,r.jsxs)(g,{...d,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[t&&r.jsx(E,{children:t}),a&&r.jsx(A,{children:a})]}),o,r.jsx(_,{})]},e)),r.jsx(y,{})]})}var C=a(37453);let P=C.zt;C.fC,C.xz,m.forwardRef(({className:e,sideOffset:t=4,...a},o)=>r.jsx(C.VY,{ref:o,sideOffset:t,className:(0,f.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=C.VY.displayName;var k=a(7155);let M=new o.S;function N({children:e}){return r.jsx(d.aH,{client:M,children:(0,r.jsxs)(P,{children:[r.jsx(x,{}),r.jsx(l,{}),r.jsx(k.w,{children:e})]})})}},35467:(e,t,a)=>{"use strict";a.d(t,{O:()=>i});var r=a(70282);let o="https://dugcurqxksfufyzshfjj.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR1Z2N1cnF4a3NmdWZ5enNoZmpqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc2MDcyNzcsImV4cCI6MjA3MzE4MzI3N30.W5kQ7ijvGCS8NAziwoJ4_DPpRDAfgnXTxh_kol3o5JI",i=o&&d?(0,r.eI)(o,d):{from:()=>({select:async()=>({data:[],error:null}),insert:()=>({throwOnError:async()=>({data:null,error:null})}),update:()=>({eq:()=>({throwOnError:async()=>({data:null,error:null})})}),delete:()=>({neq:()=>({throwOnError:async()=>({data:null,error:null})})}),upsert:()=>({throwOnError:async()=>({data:null,error:null})}),eq:()=>({throwOnError:async()=>({data:null,error:null})}),neq:()=>({throwOnError:async()=>({data:null,error:null})}),throwOnError:async()=>({data:null,error:null})})}},86021:(e,t,a)=>{"use strict";a.d(t,{cn:()=>d});var r=a(56358),o=a(23338);function d(...e){return(0,o.m6)((0,r.W)(e))}},7155:(e,t,a)=>{"use strict";a.d(t,{q:()=>p,w:()=>c});var r=a(5909),o=a(64498),d=a(6665),i=a(35467);let s={categories:[],activeCategoryId:null,players:[],teams:[],assignments:{},matches:[],groups:{},loading:!1,workspaces:[],activeWorkspaceId:null};function l(e,t){switch(t.type){case"HYDRATE":return t.payload;case"SET_ACTIVE_CATEGORY":return{...e,activeCategoryId:t.payload};case"ADD_CATEGORY":{let a={id:t.payload.id||crypto.randomUUID(),name:t.payload.name};return{...e,categories:[...e.categories,a],activeCategoryId:e.activeCategoryId||a.id}}case"RENAME_CATEGORY":return{...e,categories:e.categories.map(e=>e.id===t.payload.id?{...e,name:t.payload.name}:e)};case"DELETE_CATEGORY":{let a=e.categories.filter(e=>e.id!==t.payload.id),r=e.activeCategoryId===t.payload.id?a[0]?.id||null:e.activeCategoryId,o=e.players.filter(e=>e.categoryId!==t.payload.id),d=e.teams.filter(e=>e.categoryId!==t.payload.id),i=new Set(e.teams.filter(e=>e.categoryId===t.payload.id).map(e=>e.id)),s=Object.fromEntries(Object.entries(e.assignments).filter(([e])=>!i.has(e))),l=e.matches.filter(e=>e.categoryId!==t.payload.id),n=Object.fromEntries(Object.entries(e.groups).filter(([e])=>!i.has(e)));return{...e,categories:a,activeCategoryId:r,players:o,teams:d,assignments:s,matches:l,groups:n}}case"ADD_PLAYER":{let a=t.payload,r="id"in a?a:{id:crypto.randomUUID(),...a},o={...r,categoryId:r.categoryId||e.activeCategoryId||e.categories[0]?.id};return{...e,players:[...e.players,o]}}case"UPDATE_PLAYER":return{...e,players:e.players.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_PLAYER":{let a=Object.fromEntries(Object.entries(e.assignments).map(([e,a])=>[e,a.filter(e=>e!==t.payload.id)]));return{...e,players:e.players.filter(e=>e.id!==t.payload.id),assignments:a}}case"ADD_TEAM":{let a=t.payload,r="id"in a?a:{id:crypto.randomUUID(),...a},o={...r,categoryId:r.categoryId||e.activeCategoryId||e.categories[0]?.id};return{...e,teams:[...e.teams,o],assignments:{...e.assignments,[o.id]:[]}}}case"UPDATE_TEAM":return{...e,teams:e.teams.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_TEAM":{let{[t.payload.id]:a,...r}=e.assignments;return{...e,teams:e.teams.filter(e=>e.id!==t.payload.id),assignments:r}}case"SET_ASSIGNMENTS":return{...e,assignments:t.payload};case"ADD_MATCHES":return{...e,matches:[...e.matches,...t.payload]};case"UPDATE_MATCH":return{...e,matches:e.matches.map(e=>e.id===t.payload.id?t.payload:e)};case"DELETE_MATCH":return{...e,matches:e.matches.filter(e=>e.id!==t.payload.id)};case"EDIT_MATCH_TEAMS":return{...e,matches:e.matches.map(e=>e.id===t.payload.id?{...e,leftTeamId:t.payload.leftTeamId,rightTeamId:t.payload.rightTeamId,startedAt:null,half:1,remainingMs:12e5,events:{}}:e)};case"CLEAR_MATCHES":return{...e,matches:[]};case"SET_GROUPS":return{...e,groups:t.payload};case"RESET_TEAMS_AND_PHASES":return{...e,assignments:{},matches:[],groups:{}};case"SET_LOADING":return{...e,loading:t.payload};case"SET_WORKSPACES":return{...e,workspaces:t.payload,activeWorkspaceId:e.activeWorkspaceId||t.payload[0]?.id||null};case"SET_ACTIVE_WORKSPACE":return{...e,activeWorkspaceId:t.payload};case"RESET_ALL":return s;default:return e}}let n=(0,d.createContext)(null),c=({children:e})=>{let[t,a]=(0,d.useReducer)(l,s),c=(0,d.useRef)(!1);(0,d.useEffect)(()=>{a({type:"HYDRATE",payload:function(){try{return s}catch{return s}}()}),c.current=!0},[]),(0,d.useEffect)(()=>{c.current},[t]);let{userId:p}=(0,o.y)(),f=(0,d.useRef)(null),u=(0,d.useRef)(0);(0,d.useEffect)(()=>{},[p]),(0,d.useEffect)(()=>{(async()=>{if(!p)return;let e=t.activeWorkspaceId,r=t.workspaces;if(!e||0===r.length){let{data:t}=await i.O.from("workspace_members").select("workspace_id, workspaces ( id, name )").eq("user_id",p),o=(t||[]).map(e=>e.workspaces?{id:e.workspaces.id,name:e.workspaces.name}:null).filter(Boolean);if(!o.length){let{data:e,error:t}=await i.O.from("workspaces").insert({name:"Pessoal",created_by:p}).select("id, name").single();!t&&e&&(await i.O.from("workspace_members").insert({workspace_id:e.id,user_id:p,role:"owner"}),await Promise.all([i.O.from("categories").update({workspace_id:e.id}).eq("owner_id",p).is("workspace_id",null),i.O.from("players").update({workspace_id:e.id}).eq("owner_id",p).is("workspace_id",null),i.O.from("teams").update({workspace_id:e.id}).eq("owner_id",p).is("workspace_id",null),i.O.from("matches").update({workspace_id:e.id}).eq("owner_id",p).is("workspace_id",null),i.O.from("assignments").update({workspace_id:e.id}).eq("owner_id",p).is("workspace_id",null),i.O.from("match_events").update({workspace_id:e.id}).eq("owner_id",p).is("workspace_id",null)]),o=[{id:e.id,name:e.name}])}r=o,e=e||o[0]?.id||null,o.length&&a({type:"SET_WORKSPACES",payload:o}),e&&a({type:"SET_ACTIVE_WORKSPACE",payload:e})}let o=t.activeCategoryId||t.categories[0]?.id||null,d=`${p}::${e||"__NO_WS__"}::${o||"__NO_CAT__"}`;if((f.current||void 0)===d){console.log("[App] load skip (same key)",{loadKey:d});return}f.current=d,console.log("[App] load start",{loadKey:d,wsId:e,cat:o}),a({type:"SET_LOADING",payload:!0});let s=++u.current;console.log("[App] fetch bundle",{reqId:s,wsId:e,cat:o});try{let[{data:d},{data:l},{data:n},{data:p},{data:m},{data:f}]=await Promise.all([e?i.O.from("categories").select("id, name").eq("workspace_id",e).then(e=>({data:e.data||[]})):Promise.resolve({data:[]}),o&&e?i.O.from("players").select("id, jersey_number, name, position, paid, category_id").eq("workspace_id",e).eq("category_id",o).then(e=>({data:(e.data||[]).map(e=>({id:e.id,jerseyNumber:e.jersey_number,name:e.name,position:e.position,paid:e.paid,category_id:e.category_id}))})):Promise.resolve({data:[]}),o&&e?i.O.from("teams").select("id, name, color, capacity, category_id").eq("workspace_id",e).eq("category_id",o).then(e=>({data:e.data||[]})):Promise.resolve({data:[]}),o&&e?i.O.from("assignments").select("team_id, player_id").eq("workspace_id",e).eq("category_id",o).then(e=>({data:e.data||[]})):Promise.resolve({data:[]}),o&&e?i.O.from("matches").select("id, left_team_id, right_team_id, phase, started_at, half, remaining_ms, category_id").eq("workspace_id",e).eq("category_id",o).then(e=>({data:e.data||[]})):Promise.resolve({data:[]}),o&&e?i.O.from("match_events").select("match_id, player_id, goals, yellow, red, destaque").eq("workspace_id",e).eq("category_id",o).then(e=>({data:e.data||[]})):Promise.resolve({data:[]})]);if(s!==u.current){console.log("[App] load ignore stale",{reqId:s,current:u.current});return}let y=(d||[]).map(e=>({id:e.id,name:e.name})),h=o&&y.some(e=>e.id===o)?o:y[0]?.id||null,g=t.activeCategoryId||t.categories[0]?.id||null,_=g&&y.some(e=>e.id===g)?g:h,E={};(n||[]).forEach(e=>E[e.id]=[]),(p||[]).forEach(e=>{E[e.team_id]||(E[e.team_id]=[]),E[e.team_id].push(e.player_id)});let A={};(f||[]).forEach(e=>{A[e.match_id]||(A[e.match_id]={}),A[e.match_id][e.player_id]={goals:e.goals||0,yellow:e.yellow||0,red:!!e.red,destaque:!!e.destaque}});let b=(m||[]).map(e=>({id:e.id,leftTeamId:e.left_team_id,rightTeamId:e.right_team_id,phase:e.phase,half:e.half||1,remainingMs:e.remaining_ms??12e5,startedAt:e.started_at?new Date(e.started_at).getTime():null,events:A[e.id]||{},categoryId:e.category_id})),w=(n||[]).map(e=>({id:e.id,name:e.name,color:e.color,capacity:e.capacity,categoryId:e.category_id})),I=(l||[]).map(e=>({id:e.id,jerseyNumber:e.jersey_number,name:e.name,position:e.position,paid:e.paid,categoryId:e.category_id}));a({type:"HYDRATE",payload:{categories:y,activeCategoryId:_,players:I,teams:w,assignments:E,matches:b,groups:{},loading:!1,workspaces:r||[],activeWorkspaceId:e||null}}),console.log("[App] hydrate",{applyActive:_,counts:{categories:y.length,players:I.length,teams:w.length,matches:b.length}}),c.current=!0}finally{a({type:"SET_LOADING",payload:!1}),console.log("[App] load finished",{loadKey:f.current})}})()},[p,t.activeCategoryId,t.activeWorkspaceId]);let y=e=>{let r=e;if("SET_ACTIVE_CATEGORY"===e.type&&(console.log("[App] dispatch SET_ACTIVE_CATEGORY",{prev:t.activeCategoryId,next:e.payload}),e.payload===t.activeCategoryId)){console.log("[App] ignore redundant category change");return}"ADD_PLAYER"!==e.type||"id"in e.payload||(r={type:"ADD_PLAYER",payload:{id:crypto.randomUUID(),...e.payload}}),"ADD_TEAM"!==e.type||"id"in e.payload||(r={type:"ADD_TEAM",payload:{id:crypto.randomUUID(),...e.payload}}),"ADD_CATEGORY"!==e.type||"id"in e.payload||(r={type:"ADD_CATEGORY",payload:{id:crypto.randomUUID(),...e.payload}}),a(r),("SET_ACTIVE_CATEGORY"===r.type||"SET_ACTIVE_WORKSPACE"===r.type)&&p&&a({type:"SET_LOADING",payload:!0}),h(r)};async function h(e){try{if(!p)return;let a=t.activeCategoryId||t.categories[0]?.id||null,r=t.activeWorkspaceId||null;switch(e.type){case"ADD_CATEGORY":await i.O.from("categories").insert({id:e.payload?.id||void 0,name:e.payload.name,owner_id:p,workspace_id:r}).throwOnError();break;case"RENAME_CATEGORY":await i.O.from("categories").update({name:e.payload.name}).eq("id",e.payload.id).throwOnError();break;case"DELETE_CATEGORY":await i.O.from("categories").delete().eq("id",e.payload.id).throwOnError();break;case"ADD_PLAYER":{let t=e.payload,o=t.id?{id:t.id,jersey_number:t.jerseyNumber,name:t.name,position:t.position,paid:t.paid,owner_id:p,category_id:a,workspace_id:r}:{jersey_number:t.jerseyNumber,name:t.name,position:t.position,paid:t.paid,owner_id:p,category_id:a,workspace_id:r};await i.O.from("players").insert(o).throwOnError();break}case"UPDATE_PLAYER":await i.O.from("players").update({jersey_number:e.payload.jerseyNumber,name:e.payload.name,position:e.payload.position,paid:e.payload.paid}).eq("id",e.payload.id).throwOnError();break;case"DELETE_PLAYER":await i.O.from("players").delete().eq("id",e.payload.id).throwOnError();break;case"ADD_TEAM":{let t=e.payload,o=t.id?{id:t.id,name:t.name,color:t.color,capacity:t.capacity,owner_id:p,category_id:a,workspace_id:r}:{name:t.name,color:t.color,capacity:t.capacity,owner_id:p,category_id:a,workspace_id:r};await i.O.from("teams").insert(o).throwOnError();break}case"UPDATE_TEAM":await i.O.from("teams").update({name:e.payload.name,color:e.payload.color,capacity:e.payload.capacity}).eq("id",e.payload.id).throwOnError();break;case"DELETE_TEAM":await i.O.from("teams").delete().eq("id",e.payload.id).throwOnError();break;case"SET_ASSIGNMENTS":{if(!a)break;let t=[];for(let[o,d]of Object.entries(e.payload))for(let e of d)t.push({team_id:o,player_id:e,owner_id:p,category_id:a,workspace_id:r});r?await i.O.from("assignments").delete().eq("workspace_id",r).eq("category_id",a).throwOnError():await i.O.from("assignments").delete().eq("owner_id",p).eq("category_id",a).throwOnError(),t.length&&await i.O.from("assignments").insert(t).throwOnError();break}case"ADD_MATCHES":{if(!e.payload.length||!a)break;let t=e.payload.map(e=>({id:e.id,left_team_id:e.leftTeamId,right_team_id:e.rightTeamId,phase:e.phase,started_at:e.startedAt?new Date(e.startedAt).toISOString():null,half:e.half,remaining_ms:e.remainingMs,owner_id:p,category_id:a,workspace_id:r}));await i.O.from("matches").insert(t).throwOnError();break}case"DELETE_MATCH":await Promise.all([i.O.from("match_events").delete().eq("match_id",e.payload.id).throwOnError(),i.O.from("matches").delete().eq("id",e.payload.id).throwOnError()]);break;case"EDIT_MATCH_TEAMS":await Promise.all([i.O.from("matches").update({left_team_id:e.payload.leftTeamId,right_team_id:e.payload.rightTeamId,started_at:null,half:1,remaining_ms:12e5}).eq("id",e.payload.id).throwOnError(),i.O.from("match_events").delete().eq("match_id",e.payload.id).throwOnError()]);break;case"CLEAR_MATCHES":if(!a)break;await Promise.all([i.O.from("match_events").delete().eq("category_id",a).throwOnError(),i.O.from("matches").delete().eq("category_id",a).throwOnError()])}}catch(e){console.error(e)}}(0,d.useEffect)(()=>{let e=setInterval(()=>{let e=Date.now(),r=t.matches.filter(e=>e.startedAt);0!==r.length&&r.forEach(t=>{let r=e-(t.startedAt||0),o=Math.max(0,t.remainingMs-r),d={...t,remainingMs:o,startedAt:e};0===o&&(d.startedAt=null),a({type:"UPDATE_MATCH",payload:d})})},1e3);return()=>clearInterval(e)},[t.matches]);let g=e=>{let a=t.activeCategoryId||t.categories[0]?.id||"",r=t.teams.filter(e=>e.categoryId===a),o=(e?t.players.filter(e=>e.paid):t.players).filter(e=>e.categoryId===a);if(0===r.length)return;let d=Object.fromEntries(r.map(e=>[e.id,[]])),i=new Set,s=["SEM POSI\xc7\xc3O","GOL","FIXO","MEIO","ALA DIREITA","ALA ESQUERDA","FRENTE"],l={"SEM POSI\xc7\xc3O":[],GOL:[],FIXO:[],MEIO:[],"ALA DIREITA":[],"ALA ESQUERDA":[],FRENTE:[]};for(let e of o)(l[e.position]||=[]).push(e);for(let e of s)l[e]=m(l[e]||[]);let n={"SEM POSI\xc7\xc3O":0,GOL:0,FIXO:0,MEIO:0,"ALA DIREITA":0,"ALA ESQUERDA":0,FRENTE:0},c={};for(let e of r)c[e.id]=Math.min(e.capacity,s.length+2);s.forEach((e,t)=>{let a=l[e],o=n[e];for(let e=0;e<r.length;e++){let s=r[(e+t)%r.length];if((d[s.id]?.length||0)>=c[s.id])continue;for(;o<a.length&&i.has(a[o].id);)o++;if(o>=a.length)break;let l=a[o];d[s.id].push(l.id),i.add(l.id),o++}n[e]=o});let p=m(o.filter(e=>"GOL"!==e.position&&!i.has(e.id))),f=0;for(let e of p){let t=0;for(;t<r.length;){let a=r[f%r.length];if((d[a.id]?.length||0)<c[a.id]){d[a.id].push(e.id),i.add(e.id),f++;break}f++,t++}}let u=e=>d[e]?.length||0,h=e=>(d[e]||[]).some(e=>o.find(t=>t.id===e)?.position!=="GOL"),g=e=>{let t=d[e]||[],a=t.findIndex(e=>o.find(t=>t.id===e)?.position!=="GOL");return a>=0?{pid:t[a],idx:a}:null},_=0;for(;_++<100;){let e=r.map(e=>({t:e,c:u(e.id)})).sort((e,t)=>t.c-e.c),t=e[0]?.c??0,a=e[e.length-1]?.c??0;if(t-a<=1)break;let o=e.filter(e=>e.c===t&&h(e.t.id)),i=e.filter(e=>e.c===a&&(d[e.t.id]?.length||0)<c[e.t.id]);if(!o.length||!i.length)break;let s=o[0].t.id,l=i[0].t.id,n=g(s);if(!n)break;d[s].splice(n.idx,1),(d[l]||=[]).push(n.pid)}let E={...t.assignments};for(let e of Object.keys(d))E[e]=d[e];y({type:"SET_ASSIGNMENTS",payload:E})},_=(e,r)=>{let o=t.activeCategoryId||t.categories[0]?.id||"",d=e=>t.teams.find(t=>t.id===e)?.categoryId===o,i=new Set(t.matches.filter(t=>t.phase===e&&t.categoryId===o).map(e=>[e.leftTeamId,e.rightTeamId].sort().join("::"))),s=[];if("Classifica\xe7\xe3o"===e){t.matches.filter(t=>t.phase===e&&t.categoryId===o).forEach(e=>a({type:"DELETE_MATCH",payload:{id:e.id}}));let i=m(r.slice().filter(d)),l=i.slice(0,Math.min(8,i.length)),n=l.slice(0,Math.min(4,l.length)),c=l.slice(4,Math.min(8,l.length)),p={};for(let e of n)p[e]="A";for(let e of c)p[e]="B";y({type:"SET_GROUPS",payload:p});let f=e=>{let t=m(e.slice()),a=[];for(let e=0;e+1<t.length;e+=2)a.push([t[e],t[e+1]]);return a};s=[...f(n),...f(c)]}else{let e=r.slice().filter(d);for(let t=0;t+1<e.length;t+=2)s.push([e[t],e[t+1]])}let l=s.filter(([e,t])=>!i.has([e,t].sort().join("::"))).map(([t,a])=>({id:crypto.randomUUID(),leftTeamId:t,rightTeamId:a,phase:e,half:1,remainingMs:12e5,startedAt:null,events:{},categoryId:o}));l.length&&y({type:"ADD_MATCHES",payload:l})};function E(e){let r=t.activeCategoryId||t.categories[0]?.id||"",o=t.teams.filter(e=>e.categoryId===r),d=function(e,t){let a=process.env["Oitavas"===e?"NEXT_PUBLIC_QUALIFIERS_OITAVAS":"Quartas"===e?"NEXT_PUBLIC_QUALIFIERS_QUARTAS":"Semifinal"===e?"NEXT_PUBLIC_QUALIFIERS_SEMIFINAL":"NEXT_PUBLIC_QUALIFIERS_FINAL"],r=a?parseInt(String(a),10):NaN;return Number.isFinite(r)&&r>1?Math.min(r,t):"Oitavas"===e?Math.min(16,t):"Quartas"===e?Math.min(8,t):"Semifinal"===e?Math.min(4,t):Math.min(2,t)}(e,o.length),i=new Map;for(let e of o)i.set(e.id,{teamId:e.id,name:e.name,color:e.color,Pts:0,SG:0,GF:0});let s=(e,a)=>{let r=t.assignments[e]||[],o=0;for(let e of r){let t=a.events[e];t&&(o+=t.goals)}return o};for(let e of t.matches.filter(e=>"Classifica\xe7\xe3o"===e.phase&&e.categoryId===r)){let t=i.get(e.leftTeamId),a=i.get(e.rightTeamId);if(!t||!a)continue;let r=s(t.teamId,e),o=s(a.teamId,e);t.GF+=r,a.GF+=o,t.SG+=r-o,a.SG+=o-r,r>o?t.Pts+=3:r<o?a.Pts+=3:(t.Pts+=1,a.Pts+=1)}let l=[],n=Array.from(i.values()).sort((e,t)=>t.Pts-e.Pts||t.SG-e.SG||t.GF-e.GF||e.name.localeCompare(t.name));l=n.slice(0,Math.min(d,n.length)).map(e=>e.teamId);let c=[];if(l.length>=4&&l.length%4==0){let e=l.length/4,t=Array.from({length:e},()=>[]);for(let a=0;a<e;a++)t[a].push(l[a]);for(let a=0;a<e;a++)t[e-1-a].push(l[e+a]);for(let a=0;a<e;a++)t[a].push(l[2*e+a]);for(let a=0;a<e;a++)t[e-1-a].push(l[3*e+a]);for(let e of t)4===e.length&&(c.push([e[0],e[3]]),c.push([e[1],e[2]]))}else for(let e=0;e+1<l.length;e+=2)c.push([l[e],l[e+1]]);t.matches.filter(t=>t.phase===e&&t.categoryId===r).forEach(e=>a({type:"DELETE_MATCH",payload:{id:e.id}}));let p=c.map(([t,a])=>({id:crypto.randomUUID(),leftTeamId:t,rightTeamId:a,phase:e,half:1,remainingMs:12e5,startedAt:null,events:{},categoryId:r}));p.length&&y({type:"ADD_MATCHES",payload:p})}let A=(e,r,o)=>{let d=t.matches.find(t=>t.id===e);if(!d)return;let s=o(d.events[r]||{goals:0,yellow:0,red:!1,destaque:!1});a({type:"UPDATE_MATCH",payload:{...d,events:{...d.events,[r]:s}}});let l=t.activeCategoryId||t.categories[0]?.id||null,n=t.activeWorkspaceId||null;i.O.from("match_events").upsert({match_id:e,player_id:r,goals:s.goals,yellow:s.yellow,red:s.red,destaque:s.destaque,owner_id:p||null,category_id:l,workspace_id:n},{onConflict:"match_id,player_id,owner_id,category_id"}).throwOnError()},b=(e,r)=>{let o=t.matches.find(t=>t.id===e);if(!o)return;let d=o.events[r]||{goals:0,yellow:0,red:!1,destaque:!1},s=!d.destaque,l={};for(let[e,t]of Object.entries(o.events))l[e]={...t,destaque:!1};l[r]={...d,destaque:s},a({type:"UPDATE_MATCH",payload:{...o,events:l}});let n=Array.from(new Set([...Object.keys(l),r])),c=t.activeCategoryId||t.categories[0]?.id||null,m=t.activeWorkspaceId||null;Promise.all(n.map(t=>i.O.from("match_events").upsert({match_id:e,player_id:t,goals:l[t]?.goals??0,yellow:l[t]?.yellow??0,red:l[t]?.red??!1,destaque:t===r&&s,owner_id:p||null,category_id:c,workspace_id:m},{onConflict:"match_id,player_id,owner_id,category_id"}).throwOnError()))},w=e=>{let r=t.matches.find(t=>t.id===e);if(!r)return;let o={...r,startedAt:r.startedAt?null:Date.now()};a({type:"UPDATE_MATCH",payload:o}),i.O.from("matches").update({started_at:o.startedAt?new Date(o.startedAt).toISOString():null}).eq("id",e)},I=e=>{let r=t.matches.find(t=>t.id===e);if(!r)return;let o={...r,startedAt:null,remainingMs:12e5};a({type:"UPDATE_MATCH",payload:o}),i.O.from("matches").update({started_at:null,remaining_ms:o.remainingMs}).eq("id",e)},T=e=>{let r=t.matches.find(t=>t.id===e);if(!r)return;let o=1===r.half?2:1,d={...r,half:o,startedAt:null,remainingMs:12e5};a({type:"UPDATE_MATCH",payload:d}),i.O.from("matches").update({half:d.half,started_at:null,remaining_ms:d.remainingMs}).eq("id",e)},v=(0,d.useMemo)(()=>({state:t,dispatch:y,drawTeams:g,generateMatches:_,generateEliminationFromStandings:E,resetDrawAndPhases:()=>y({type:"RESET_TEAMS_AND_PHASES"}),updatePlayerStat:A,setUniqueDestaque:b,startPauseTimer:w,resetTimer:I,nextHalf:T}),[t]);return r.jsx(n.Provider,{value:v,children:e})},p=()=>{let e=(0,d.useContext)(n);if(!e)throw Error("useApp must be used within AppProvider");return e};function m(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let a=Math.floor(Math.random()*(e+1));[t[e],t[a]]=[t[a],t[e]]}return t}},48461:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s,metadata:()=>i});var r=a(40142),o=a(37925);a(92115);let d=(0,a(36018).createProxy)(String.raw`D:\Projetos\Solutech\dash-fut\app\providers.tsx#Providers`),i={title:"Futebol Dashboard",description:"Organize seu campeonato"};function s({children:e}){return r.jsx(o.El,{children:r.jsx("html",{lang:"pt-BR",suppressHydrationWarning:!0,children:r.jsx("body",{children:r.jsx(d,{children:e})})})})}},78507:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(40142),o=a(77400);function d(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),r.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! P\xe1gina n\xe3o encontrada"}),r.jsx(o.default,{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Voltar ao in\xedcio"})]})})}},92115:()=>{}};