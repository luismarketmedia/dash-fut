(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{3546:function(e,a,r){Promise.resolve().then(r.bind(r,1063))},1063:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return p}});var t=r(8947),s=r(9769),c=r(4848),n=r(3081),l=r(6681),i=r(3478),d=r(1917),o=r(2050),m=r(4617),f=r(8462),u=r(545),h=r(2617);function p(){let{state:e,dispatch:a}=(0,h.q)(),r=e.categories,{userId:p}=(0,s.y)(),[x,g]=(0,n.useState)({}),j=(0,n.useMemo)(()=>{let a={};for(let e of r)a[e.id]={players:0,teams:0,matches:0};for(let r of e.players)a[r.categoryId]&&a[r.categoryId].players++;for(let r of e.teams)a[r.categoryId]&&a[r.categoryId].teams++;for(let r of e.matches)a[r.categoryId]&&a[r.categoryId].matches++;return a},[r,e.players,e.teams,e.matches]);(0,n.useEffect)(()=>{let a=e.activeWorkspaceId;if(!p||!a){g(j);return}let t=!1;return(async()=>{let[e,s,c]=await Promise.all([u.O.from("players").select("category_id").eq("workspace_id",a).then(e=>e.data||[]),u.O.from("teams").select("category_id").eq("workspace_id",a).then(e=>e.data||[]),u.O.from("matches").select("category_id").eq("workspace_id",a).then(e=>e.data||[])]);if(t)return;let n={};for(let e of r)n[e.id]={players:0,teams:0,matches:0};e.forEach(e=>{let a=e.category_id;n[a]&&n[a].players++}),s.forEach(e=>{let a=e.category_id;n[a]&&n[a].teams++}),c.forEach(e=>{let a=e.category_id;n[a]&&n[a].matches++}),g(n)})(),()=>{t=!0}},[r,p,e.activeWorkspaceId,j]);let[y,N]=(0,n.useState)(!1),[v,C]=(0,n.useState)(""),w=async()=>{let e=v.trim();e&&(a({type:"ADD_CATEGORY",payload:{name:e}}),C(""),N(!1))};return(0,t.jsxs)(l.c,{children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Categorias"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Listadas diretamente do banco de dados."})]}),(0,t.jsx)("div",{children:(0,t.jsx)(d.z,{onClick:()=>N(!0),children:"Nova categoria"})})]}),(0,t.jsx)(m.Vq,{open:y,onOpenChange:N,children:(0,t.jsxs)(m.cZ,{children:[(0,t.jsxs)(m.fK,{children:[(0,t.jsx)(m.$N,{children:"Nova categoria"}),(0,t.jsx)(m.Be,{children:"Informe o nome da categoria."})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)(f.I,{autoFocus:!0,placeholder:"Ex.: Principal",value:v,onChange:e=>C(e.target.value)})}),(0,t.jsxs)(m.cN,{children:[(0,t.jsx)(d.z,{variant:"outline",onClick:()=>N(!1),children:"Cancelar"}),(0,t.jsx)(d.z,{onClick:w,disabled:!v.trim(),children:"Criar"})]})]})}),0===r.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:'Nenhuma categoria encontrada. Clique em "Nova categoria" para criar.'}):(0,t.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:r.map(e=>{let a=e.name.normalize("NFD").replace(RegExp("\\p{Diacritic}","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),r=x[e.id]||j[e.id]||{players:0,teams:0,matches:0};return(0,t.jsx)(c.default,{prefetch:!1,href:"/".concat(a),className:"block",children:(0,t.jsxs)(o.Zb,{className:"transition-shadow hover:shadow-md",children:[(0,t.jsx)(o.Ol,{children:(0,t.jsxs)(o.ll,{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:e.name}),(0,t.jsxs)(i.C,{variant:"secondary",children:[r.teams," times"]})]})}),(0,t.jsx)(o.aY,{className:"text-sm text-muted-foreground",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-medium",children:r.players})," jogadores"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-medium",children:r.matches})," partidas"]})]})})]})},e.id)})})]})}},2050:function(e,a,r){"use strict";r.d(a,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return n},aY:function(){return o},ll:function(){return i}});var t=r(8947),s=r(3081),c=r(5297);let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let l=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("h3",{ref:a,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("p",{ref:a,className:(0,c.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,c.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent",s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,c.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"}},function(e){e.O(0,[672,165,612,106,161,629,167,580,996,744],function(){return e(e.s=3546)}),_N_E=e.O()}]);